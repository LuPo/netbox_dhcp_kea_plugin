{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#netbox-dhcp-kea-plugin","title":"NetBox DHCP-KEA Plugin","text":"<p>A NetBox plugin for managing ISC KEA DHCP server configurations. This plugin extends NetBox with comprehensive DHCP infrastructure management, including server configuration, option definitions, client classification, High Availability relationships, and DHCP relay information for network devices.</p> <ul> <li>Free software: GPL-3.0-only</li> <li>Documentation: https://LuPo.github.io/netbox-dhcp-kea-plugin/</li> </ul>"},{"location":"#overview","title":"Overview","text":"<p>This plugin bridges the gap between NetBox IPAM and ISC KEA DHCP server configuration by:</p> <ul> <li>Linking NetBox Prefixes to DHCP server configurations</li> <li>Managing DHCP options (standard and vendor-specific)</li> <li>Configuring client classification with KEA test expressions</li> <li>Supporting High Availability (HA) deployments</li> <li>Providing DHCP relay target information for network device configuration</li> <li>Generating KEA-compatible configuration output</li> </ul>"},{"location":"#features","title":"Features","text":""},{"location":"#core-models","title":"Core Models","text":"<ul> <li>DHCP Servers: Manage ISC KEA DHCP server instances linked to NetBox IP addresses</li> <li>Vendor Option Spaces: Define vendor-specific option spaces with enterprise IDs</li> <li>Option Definitions: Create custom DHCP option definitions (KEA <code>option-def</code>)</li> <li>Option Data: Configure DHCP option values (KEA <code>option-data</code>)</li> <li>Client Classes: Configure client classification rules with KEA test expressions</li> <li>Prefix DHCP Config: Link NetBox Prefixes to DHCP configurations with pools and options</li> <li>HA Relationships: Configure High Availability relationships between DHCP servers</li> </ul>"},{"location":"#high-availability-ha-support","title":"High Availability (HA) Support","text":"<ul> <li>Configure HA relationships with multiple modes: hot-standby, load-balancing, passive-backup</li> <li>Define server roles within HA clusters (primary, secondary, standby, backup)</li> <li>Automatic configuration sync from primary to all HA peers</li> <li>HA-aware KEA config generation ensures consistent configurations across all peers</li> <li>Protection against orphaned configs (cannot delete/demote primary with existing configs)</li> <li>Easy config migration when switching primary servers</li> <li>UI intelligently hides config management options for non-primary servers</li> </ul>"},{"location":"#dhcp-relay-support","title":"DHCP Relay Support","text":"<p>The plugin provides DHCP relay target information for configuring <code>ip helper-address</code> on Layer 3 network devices:</p> <ul> <li>Integrated with Prefix API: Query <code>/api/ipam/prefixes/{id}/</code> to get relay targets directly</li> <li>Dedicated lookup endpoint: Query by prefix CIDR with VRF support</li> <li>HA-aware: Returns all server IPs in an HA relationship for redundant relay configuration</li> </ul>"},{"location":"#integration-with-netbox","title":"Integration with NetBox","text":"<ul> <li>DHCP configuration tab on Prefix detail pages</li> <li>Direct integration with NetBox's Prefix API (adds <code>dhcp_config</code> field)</li> <li>Full REST API support for all models</li> <li>Tag support on all models</li> <li>Change logging and audit trail</li> <li>Bulk import/export capabilities</li> </ul>"},{"location":"#compatibility","title":"Compatibility","text":"NetBox Version Plugin Version 4.5 0.2.0"},{"location":"#installation","title":"Installation","text":""},{"location":"#using-pip","title":"Using pip","text":"<pre><code>pip install git+https://github.com/LuPo/netbox-dhcp-kea-plugin\n</code></pre>"},{"location":"#using-netbox-docker","title":"Using netbox-docker","text":"<p>Add to your <code>plugin_requirements.txt</code>:</p> <pre><code>git+https://github.com/LuPo/netbox-dhcp-kea-plugin\n</code></pre> <p>See netbox-docker plugin instructions for details.</p>"},{"location":"#configuration","title":"Configuration","text":"<p>Enable the plugin in your NetBox configuration (<code>configuration.py</code> or <code>plugins.py</code> for netbox-docker):</p> <pre><code>PLUGINS = [\n    'netbox_dhcp_kea_plugin'\n]\n\nPLUGINS_CONFIG = {\n    'netbox_dhcp_kea_plugin': {\n        'top_level_menu': True,      # Use top-level menu (default: True)\n        'menu_name': 'DHCP KEA',     # Menu label (default: 'DHCP KEA')\n    },\n}\n</code></pre> <p>Run migrations:</p> <pre><code>python manage.py migrate\n</code></pre>"},{"location":"#usage","title":"Usage","text":""},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li>Create DHCP Servers: Navigate to DHCP KEA &gt; DHCP Servers and add your KEA server instances</li> <li>Configure HA (optional): Set up HA relationships and assign server roles</li> <li>Define Options: Create option definitions for vendor-specific options, or use standard DHCP options</li> <li>Create Option Data: Define option values to apply to client classes or prefixes</li> <li>Set Up Client Classes: Configure client classification rules with KEA test expressions</li> <li>Configure Prefixes: Link NetBox Prefixes to DHCP servers with pools and options</li> </ol>"},{"location":"#dhcp-relay-configuration","title":"DHCP Relay Configuration","text":"<p>When configuring DHCP relay on Layer 3 switches/routers, you need the DHCP server IP addresses to use as helper addresses. This plugin provides multiple ways to retrieve this information:</p>"},{"location":"#method-1-query-prefix-api-directly","title":"Method 1: Query Prefix API Directly","text":"<p>The plugin extends NetBox's Prefix API to include DHCP relay information:</p> <pre><code>GET /api/ipam/prefixes/{id}/\n</code></pre> <p>Response includes: <pre><code>{\n    \"id\": 123,\n    \"prefix\": \"10.0.100.0/24\",\n    \"vrf\": null,\n    ...\n    \"dhcp_config\": {\n        \"server\": {\n            \"name\": \"kea-dhcp-primary\",\n            \"url\": \"http://192.168.1.10:8000/\"\n        },\n        \"relay_targets\": [\"192.168.1.10\", \"192.168.1.11\"]\n    }\n}\n</code></pre></p>"},{"location":"#method-2-lookup-by-prefix-cidr","title":"Method 2: Lookup by Prefix CIDR","text":"<p>Query the dedicated relay config endpoint:</p> <pre><code># Global VRF\nGET /api/plugins/netbox-dhcp-kea-plugin/relay-config/?prefix=10.0.100.0/24\n\n# Specific VRF\nGET /api/plugins/netbox-dhcp-kea-plugin/relay-config/?prefix=10.0.100.0/24&amp;vrf=CustomerA\n</code></pre> <p>Response: <pre><code>{\n    \"prefix\": \"10.0.100.0/24\",\n    \"dhcp_config\": {\n        \"server\": {\n            \"name\": \"kea-dhcp-primary\",\n            \"url\": \"http://192.168.1.10:8000/\"\n        },\n        \"relay_targets\": [\"192.168.1.10\", \"192.168.1.11\"]\n    }\n}\n</code></pre></p>"},{"location":"#method-3-from-prefixdhcpconfig","title":"Method 3: From PrefixDHCPConfig","text":"<pre><code>GET /api/plugins/netbox-dhcp-kea-plugin/prefix-dhcp-configs/{id}/relay-config/\n</code></pre>"},{"location":"#using-relay-targets","title":"Using Relay Targets","text":"<p>The <code>relay_targets</code> array contains all DHCP server IPs that should receive relayed requests. For HA configurations, this includes all servers in the relationship.</p> <p>Cisco IOS/IOS-XE: <pre><code>interface Vlan100\n  ip helper-address 192.168.1.10\n  ip helper-address 192.168.1.11\n</code></pre></p> <p>Juniper Junos: <pre><code>set forwarding-options dhcp-relay server-group DHCP-SERVERS 192.168.1.10\nset forwarding-options dhcp-relay server-group DHCP-SERVERS 192.168.1.11\nset forwarding-options dhcp-relay group RELAYS active-server-group DHCP-SERVERS\nset forwarding-options dhcp-relay group RELAYS interface vlan.100\n</code></pre></p> <p>Arista EOS: <pre><code>interface Vlan100\n  ip helper-address 192.168.1.10\n  ip helper-address 192.168.1.11\n</code></pre></p>"},{"location":"#kea-configuration-generation","title":"KEA Configuration Generation","text":"<p>Generate KEA-compatible configuration for a DHCP server:</p> <pre><code>GET /api/plugins/netbox-dhcp-kea-plugin/dhcp-servers/{id}/kea-config/\n</code></pre> <p>This returns a complete <code>Dhcp4</code> configuration dictionary including: - Global options - Client class definitions - Subnet configurations with pools - HA configuration (if applicable)</p>"},{"location":"#rest-api-endpoints","title":"REST API Endpoints","text":"Endpoint Description <code>/api/plugins/netbox-dhcp-kea-plugin/dhcp-servers/</code> DHCP server management <code>/api/plugins/netbox-dhcp-kea-plugin/dhcp-servers/{id}/kea-config/</code> Generate KEA config <code>/api/plugins/netbox-dhcp-kea-plugin/vendor-option-spaces/</code> Vendor option spaces <code>/api/plugins/netbox-dhcp-kea-plugin/option-definitions/</code> Option definitions <code>/api/plugins/netbox-dhcp-kea-plugin/option-data/</code> Option data/values <code>/api/plugins/netbox-dhcp-kea-plugin/client-classes/</code> Client classifications <code>/api/plugins/netbox-dhcp-kea-plugin/prefix-dhcp-configs/</code> Prefix DHCP configurations <code>/api/plugins/netbox-dhcp-kea-plugin/prefix-dhcp-configs/{id}/relay-config/</code> Relay config for prefix <code>/api/plugins/netbox-dhcp-kea-plugin/ha-relationships/</code> HA relationships <code>/api/plugins/netbox-dhcp-kea-plugin/relay-config/?prefix=X</code> Lookup relay config by prefix"},{"location":"#demo-data-generation","title":"Demo Data Generation","text":"<p>The plugin includes a management command to generate demo data for testing:</p> <pre><code># Generate demo data\npython manage.py generate_kea_demo_data --force\n\n# Clear and regenerate\npython manage.py generate_kea_demo_data --clear --force\n\n# Preview without creating\npython manage.py generate_kea_demo_data --dry-run\n\n# Remove all demo data\npython manage.py generate_kea_demo_data --purge-demo-data\n</code></pre> <p>Configure demo data generation in <code>PLUGINS_CONFIG</code>:</p> <pre><code>PLUGINS_CONFIG = {\n    'netbox_dhcp_kea_plugin': {\n        'demo_data': {\n            'enabled': True,  # Required unless using --force\n            'vendor_option_spaces': 3,\n            'option_definitions_per_space': 5,\n            'option_data': 10,\n            'client_classes': 5,\n            'dhcp_servers': 3,\n            'ha_relationships': 1,\n            'prefix_configs': 5,\n        },\n    },\n}\n</code></pre>"},{"location":"#screenshots","title":"Screenshots","text":"<p>Coming soon</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Contributions are welcome! Please feel free to submit a Pull Request.</p>"},{"location":"#credits","title":"Credits","text":"<p>This package was created with Cookiecutter and the <code>netbox-community/cookiecutter-netbox-plugin</code> project template.</p> <p>Based on the NetBox plugin tutorial: - Demo repository - Tutorial</p>"},{"location":"#license","title":"License","text":"<p>GPL-3.0-only</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":""},{"location":"changelog/#020-2026-01-27","title":"0.2.0 (2026-01-27)","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>High Availability (HA) Support</li> <li>New <code>DHCPHARelationship</code> model for managing HA relationships between DHCP servers</li> <li>New <code>DHCPHAPeer</code> model for defining server roles (primary, secondary, standby, backup) in HA relationships</li> <li>Support for KEA HA modes: hot-standby, load-balancing, passive-backup</li> <li>Automatic config sync from primary to all HA peers via <code>get_effective_*</code> methods</li> <li>HA-aware <code>to_kea_dict()</code> method that generates consistent configs across HA peers</li> <li>Protection against deleting or changing role of primary peer with existing configs</li> <li> <p><code>migrate_configs_to_new_primary()</code> helper for safely switching primary servers</p> </li> <li> <p>UI Improvements</p> </li> <li>Renamed \"Prefix Configs\" to \"DHCP Prefixes\" in navigation</li> <li>Added view (eye) button alongside edit button in DHCP Prefixes list</li> <li>Added HA Assignment and HA Role fields to DHCP Server detail view</li> <li>HA standby servers show info badge and card explaining config sync</li> <li> <p>Hidden \"Assigned Prefixes\" tab, \"Global Option Data\" and \"Client Classes\" boxes for non-primary HA servers</p> </li> <li> <p>Form Enhancements</p> </li> <li>Auto-redirect to primary server when assigning prefixes to non-primary HA servers</li> <li>User notification when config is saved to primary instead of selected server</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li><code>PrefixDHCPConfigTable</code> now uses custom <code>ViewEditActionsColumn</code> for better action buttons</li> <li>DHCP Server detail view reorganized for HA information display</li> </ul>"},{"location":"changelog/#010-2026-01-18","title":"0.1.0 (2026-01-18)","text":"<ul> <li>Initial implementation of the core models.</li> </ul>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contributing","title":"Contributing","text":"<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p> <p>We love your input! We want to make contributing to this project as easy and transparent as possible, whether it's:</p> <ul> <li>Reporting a bug</li> <li>Discussing the current state of the code</li> <li>Submitting a fix</li> <li>Proposing new features</li> <li>Becoming a maintainer</li> </ul>"},{"location":"contributing/#general-tips-for-working-on-github","title":"General Tips for Working on GitHub","text":"<ul> <li>Register for a free GitHub account if you haven't already.</li> <li>You can use GitHub Markdown for formatting text and adding images.</li> <li>To help mitigate notification spam, please avoid \"bumping\" issues with no activity. (To vote an issue up or down, use a  or  reaction.)</li> <li>Please avoid pinging members with <code>@</code> unless they've previously expressed interest or involvement with that particular issue.</li> <li>Familiarize yourself with this list of discussion anti-patterns and make every effort to avoid them.</li> </ul>"},{"location":"contributing/#types-of-contributions","title":"Types of Contributions","text":""},{"location":"contributing/#report-bugs","title":"Report Bugs","text":"<p>Report bugs at https://github.com/LuPo/netbox-dhcp-kea-plugin/issues.</p> <p>If you are reporting a bug, please include:</p> <ul> <li>Your operating system name and version.</li> <li>Any details about your local setup that might be helpful in troubleshooting.</li> <li>Detailed steps to reproduce the bug.</li> </ul>"},{"location":"contributing/#fix-bugs","title":"Fix Bugs","text":"<p>Look through the GitHub issues for bugs. Anything tagged with \"bug\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#implement-features","title":"Implement Features","text":"<p>Look through the GitHub issues for features. Anything tagged with \"enhancement\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#write-documentation","title":"Write Documentation","text":"<p>NetBox DHCP-KEA Plugin could always use more documentation, whether as part of the official NetBox DHCP-KEA Plugin docs, in docstrings, or even on the web in blog posts, articles, and such.</p>"},{"location":"contributing/#submit-feedback","title":"Submit Feedback","text":"<p>The best way to send feedback is to file an issue at https://github.com/LuPo/netbox-dhcp-kea-plugin/issues.</p> <p>If you are proposing a feature:</p> <ul> <li>Explain in detail how it would work.</li> <li>Keep the scope as narrow as possible, to make it easier to implement.</li> <li>Remember that this is a volunteer-driven project, and that contributions   are welcome :)</li> </ul>"},{"location":"contributing/#get-started","title":"Get Started!","text":"<p>Ready to contribute? Here's how to set up <code>netbox-dhcp-kea-plugin</code> for local development.</p> <ol> <li>Fork the <code>netbox-dhcp-kea-plugin</code> repo on GitHub.</li> <li> <p>Clone your fork locally</p> <pre><code>$ git clone git@github.com:your_name_here/netbox-dhcp-kea-plugin.git\n</code></pre> </li> <li> <p>Activate the NetBox virtual environment (see the NetBox documentation under Setting up a Development Environment):</p> <pre><code>$ source ~/.venv/netbox/bin/activate\n</code></pre> </li> <li> <p>Add the plugin to NetBox virtual environment in Develop mode (see Plugins Development):</p> <p>To ease development, it is recommended to go ahead and install the plugin at this point using setuptools' develop mode. This will create symbolic links within your Python environment to the plugin development directory. Call setup.py from the plugin's root directory with the develop argument (instead of install):</p> <pre><code>$ python setup.py develop\n</code></pre> </li> <li> <p>Create a branch for local development:</p> <pre><code>$ git checkout -b name-of-your-bugfix-or-feature\n</code></pre> <p>Now you can make your changes locally.</p> </li> <li> <p>Commit your changes and push your branch to GitHub:</p> <pre><code>$ git add .\n$ git commit -m \"Your detailed description of your changes.\"\n$ git push origin name-of-your-bugfix-or-feature\n</code></pre> </li> <li> <p>Submit a pull request through the GitHub website.</p> </li> </ol>"},{"location":"contributing/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<p>Before you submit a pull request, check that it meets these guidelines:</p> <ol> <li>The pull request should include tests.</li> <li>If the pull request adds functionality, the docs should be updated. Put    your new functionality into a function with a docstring, and add the    feature to the list in README.md.</li> <li>The pull request should work for Python 3.8, 3.9, 3.10 and 3.11. Check    https://github.com/LuPo/netbox-dhcp-kea-plugin/actions    and make sure that the tests pass for all supported Python versions.</li> </ol>"},{"location":"contributing/#deploying","title":"Deploying","text":"<p>A reminder for the maintainers on how to deploy. Make sure all your changes are committed (including an entry in CHANGELOG.md) and that all tests pass. Then in the github project go to <code>Releases</code> and create a new release with a new tag.  This will automatically upload the release to pypi:</p>"}]}